<!DOCTYPE html>
<html>
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 2.17.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS2103/T - Textbook Chapter [Printable] : Software Design Patterns</title>
    <link rel="stylesheet" href="../../markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../markbind/css/bootstrap-vue.min.css">
    <link rel="stylesheet" href="../../markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="../../markbind/css/octicons.css">
    <link rel="stylesheet" href="../../markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="../../markbind/css/markbind.min.css"><script src="../../markbind/js/polyfill.min.js"></script>
    <script src="../../markbind/js/vue.min.js"></script>
    <script src="../../markbind/js/markbind.min.js"></script>
    <script src="../../markbind/js/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><link rel="stylesheet" href="/website/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="../../markbind/layouts/default/styles.css"><link rel="icon" href="/website/favicon.ico"></head>
<body >
<div id="app">
    <div id="flex-body">
        
<div id="content-wrapper">
<link rel="stylesheet" href="/website/book/css/textbook.css">
<link rel="stylesheet" href="/website/book/css/print.css">
<div class="website-content">
<div id="title">
<div><h1 id="software-design-patterns"><span id="software-design-patterns" class="anchor"></span><span>Software design patterns</span><a class="fa fa-anchor" href="#software-design-patterns" onclick="event.stopPropagation()"></a></h1></div></div>
<div>
<p><small><span class="dimmed"><span><span aria-hidden="true" class="glyphicon glyphicon-print"></span></span> This is a <strong>printer-friendly</strong> version. It omits exercises, optional topics (i.e., four-star topics), and other extra content such as learning outcomes.</span></small></p></div>
<p><div><h2 id="introduction"><span id="introduction" class="anchor"></span><span>Introduction</span><a class="fa fa-anchor" href="#introduction" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what"><span id="what" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DarkOrange"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<box type="definition" seamless>
<div>
<p><strong>Design pattern</strong>: An <em>elegant reusable solution</em> to a <em>commonly recurring problem</em> within a <em>given context</em> in software design.</p></div></box>
<p>In software development, there are certain problems that recur in a certain context.</p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> Some examples of recurring design problems:</p>
<div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead>
<tr>
<th>Design Context</th>
<th>Recurring Problem</th></tr></thead>
<tbody>
<tr>
<td>Assembling a system that makes use of other existing systems implemented using different technologies</td>
<td>What is the best architecture?</td></tr>
<tr>
<td>UI needs to be updated when the data in the application backend changes</td>
<td>How to initiate an update to the UI when data changes without coupling the backend to the UI?</td></tr></tbody></table></div></box>
<p>After repeated attempts at solving such problems, better solutions are discovered and refined over time. These solutions are known as design patterns, <strong>a term popularized by the seminal book</strong> <a href="https://en.wikipedia.org/wiki/Design_Patterns"><strong><em>Design Patterns: Elements of Reusable Object-Oriented Software</em> by the so-called &quot;Gang of Four&quot; (GoF)</strong></a> written by Eric Gamma, Richard Helm, Ralph Johnson, and John Vlissides.</p></div></div></div>
<div class="indented-less">
<h4 id="format"><span id="format" class="anchor"></span>Format <span class="badge badge-light"><small><small><font color="DarkOrange"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#format" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p>The common format to describe a pattern consists of the following components:</p>
<ul>
<li><strong>Context</strong>: The situation or scenario where the design problem is encountered.</li>
<li><strong>Problem</strong>: The main difficulty to be resolved.</li>
<li><strong>Solution</strong>: The core of the solution. It is important to note that the solution presented only includes the most general details, which may need further refinement for a specific context.</li>
<li><strong>Anti-patterns</strong> (optional): Commonly used solutions, which are usually incorrect and/or inferior to the Design Pattern.</li>
<li><strong>Consequences</strong> (optional): Identifying the pros and cons of applying the pattern.</li>
<li><strong>Other useful information</strong> (optional): Code examples, known uses, other related patterns, etc.</li></ul></div></div></div></div>
<p><div><h2 id="singleton-pattern"><span id="singleton-pattern" class="anchor"></span><span>Singleton pattern</span><a class="fa fa-anchor" href="#singleton-pattern" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what-2"><span id="what-2" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DarkOrange"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what-2" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Context</strong></p>
<p>Certain classes should have no more than just one instance (e.g. the main controller class of the system). These single instances are commonly known as <em>singletons</em>.</p>
<p><strong>Problem</strong></p>
<p>A normal class can be instantiated multiple times by invoking the constructor.</p>
<p><strong>Solution</strong></p>
<p>Make the constructor of the singleton class <code class="hljs inline no-lang" v-pre>private</code>, <span class="dimmed">because a <code class="hljs inline no-lang" v-pre>public</code> constructor will allow others to instantiate the class at will</span>. Provide a <code class="hljs inline no-lang" v-pre>public</code> class-level method to access the <em>single instance</em>.</p>
<box>
<p>Example:</p>
<p><pic src="/website/book/designPatterns/singleton/what/images/singleton.png"></pic></p>
<p></p></box></div></div></div>
<div class="indented-less">
<h4 id="implementation"><span id="implementation" class="anchor"></span>Implementation <span class="badge badge-light"><small><small><font color="DarkOrange"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#implementation" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p>Here is the typical implementation of how the Singleton pattern is applied to a class:</p>
<pre><code class="hljs java" v-pre><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Logic</span> </span>{
</span><span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Logic theOne = <span class="hljs-keyword">null</span>;
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Logic</span><span class="hljs-params">()</span> </span>{
</span><span>        ...
</span><span>    }
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Logic <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>{
</span><span>        <span class="hljs-keyword">if</span> (theOne == <span class="hljs-keyword">null</span>) {
</span><span>            theOne = <span class="hljs-keyword">new</span> Logic();
</span><span>        }
</span><span>        <span class="hljs-keyword">return</span> theOne;
</span><span>    }
</span><span>}
</span></code></pre><p>Notes:</p>
<ul>
<li>The constructor is <code class="hljs inline no-lang" v-pre>private</code>, which prevents instantiation from outside the class.</li>
<li>The single instance of the singleton class is maintained by a <code class="hljs inline no-lang" v-pre>private</code> class-level variable.</li>
<li>Access to this object is provided by a <code class="hljs inline no-lang" v-pre>public</code> class-level operation <code class="hljs inline no-lang" v-pre>getInstance()</code> which instantiates a single copy of the singleton class when it is executed for the first time. Subsequent calls to this operation return the single instance of the class.</li></ul>
<p>If <code class="hljs inline no-lang" v-pre>Logic</code> was not a Singleton class, an object is created like this:</p>
<pre><code class="hljs java" v-pre><span>Logic m = <span class="hljs-keyword">new</span> Logic();
</span></code></pre><p>But now, the <code class="hljs inline no-lang" v-pre>Logic</code> object needs to be accessed like this:</p>
<pre><code class="hljs java" v-pre><span>Logic m = Logic.getInstance();
</span></code></pre></div></div></div>
<div class="indented-less">
<h4 id="evaluation"><span id="evaluation" class="anchor"></span>Evaluation <span class="badge badge-light"><small><small><font color="DodgerBlue"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#evaluation" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Pros:</strong></p>
<ul>
<li>easy to apply</li>
<li>effective in achieving its goal with minimal extra work</li>
<li>provides an easy way to access the singleton object from anywhere in the code base</li></ul>
<p><strong>Cons:</strong></p>
<ul>
<li>The singleton object acts like a global variable that increases coupling across the code base.</li>
<li>In testing, it is difficult to replace Singleton objects with stubs (static methods cannot be overridden).</li>
<li>In testing, singleton objects carry data from one test to another even when you want each test to be independent of the others.</li></ul>
<p>Given that there are some significant cons, it is recommended that you apply the Singleton pattern when, in addition to requiring only one instance of a class, there is a risk of creating multiple objects by mistake, and creating such multiple objects has real negative consequences.</p></div></div></div></div>
<p><div><h2 id="facade-pattern"><span id="facade-pattern" class="anchor"></span><span>Facade pattern</span><a class="fa fa-anchor" href="#facade-pattern" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what-3"><span id="what-3" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what-3" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Context</strong></p>
<p>Components need to access functionality deep inside other components.</p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> The <code class="hljs inline no-lang" v-pre>UI</code> component of a <code class="hljs inline no-lang" v-pre>Library</code> system might want to access functionality of the <code class="hljs inline no-lang" v-pre>Book</code> class contained inside the <code class="hljs inline no-lang" v-pre>Logic</code> component.</p>
<img src="/website/book/designPatterns/facade/what/images/textBook.png" height="120">
<p></p></box>
<p><strong>Problem</strong></p>
<p>Access to the component should be allowed without exposing its internal details. <span class="dimmed">e.g.  the <code class="hljs inline no-lang" v-pre>UI</code> component should access the functionality of the <code class="hljs inline no-lang" v-pre>Logic</code> component without knowing that it contains a <code class="hljs inline no-lang" v-pre>Book</code> class within it.</span></p>
<p><strong>Solution</strong></p>
<p>Include a <span data-mb-component-type="tooltip" v-b-tooltip.hover.top.html="tooltipInnerContentGetter" class="trigger"><span data-mb-slot-name="_content">a French word that means 'front of a building'</span>Façade</span> class that sits between the component internals and users of the component such that all access to the component happens through the Facade class.</p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> The following class diagram applies the Facade pattern to the <code class="hljs inline no-lang" v-pre>Library System</code> example. The <code class="hljs inline no-lang" v-pre>LibraryLogic</code> class is the Facade class.</p>
<img src="/website/book/designPatterns/facade/what/images/textLibraryBook.png" height="120">
<p></p></box></div></div></div></div>
<p><div><h2 id="command-pattern"><span id="command-pattern" class="anchor"></span><span>Command pattern</span><a class="fa fa-anchor" href="#command-pattern" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what-4"><span id="what-4" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what-4" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Context</strong></p>
<p>A system is required to execute a number of commands, each doing a different task. For example, a system might have to support <code class="hljs inline no-lang" v-pre>Sort</code>, <code class="hljs inline no-lang" v-pre>List</code>, <code class="hljs inline no-lang" v-pre>Reset</code> commands.</p>
<p><strong>Problem</strong></p>
<p>It is preferable that some part of the code executes these commands without having to know each command type. <span class="dimmed">e.g., there can be a <code class="hljs inline no-lang" v-pre>CommandQueue</code> object that is responsible for queuing commands and executing them without knowledge of what each command does.</span></p>
<p><strong>Solution</strong></p>
<p>The essential element of this pattern is to have a general <code class="hljs inline no-lang" v-pre>&lt;&lt;Command&gt;&gt;</code> object that can be passed around, stored, executed, etc without knowing the type of command (i.e. via polymorphism).</p>
<p>Let us examine an example application of the pattern first:</p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> In the example solution below, the <code class="hljs inline no-lang" v-pre>CommandCreator</code> creates <code class="hljs inline no-lang" v-pre>List</code>, <code class="hljs inline no-lang" v-pre>Sort</code>, and <code class="hljs inline no-lang" v-pre>Reset Command</code> objects and adds them to the <code class="hljs inline no-lang" v-pre>CommandQueue</code> object. The <code class="hljs inline no-lang" v-pre>CommandQueue</code> object treats them all as <code class="hljs inline no-lang" v-pre>Command</code> objects and performs the execute/undo operation on each of them without knowledge of the specific <code class="hljs inline no-lang" v-pre>Command</code> type. When executed, each <code class="hljs inline no-lang" v-pre>Command</code> object will access the <code class="hljs inline no-lang" v-pre>DataStore</code> object to carry out its task. The <code class="hljs inline no-lang" v-pre>Command</code> class can also be an abstract class or an interface.</p>
<img src="/website/book/designPatterns/command/what/images/commandCreator.png" height="150">
<p></p></box>
<p>The general form of the solution is as follows.</p>
<img src="/website/book/designPatterns/command/what/images/clientInvoker.png" height="200">
<p></p>
<p>The <code class="hljs inline no-lang" v-pre>&lt;&lt;Client&gt;&gt;</code> creates a <code class="hljs inline no-lang" v-pre>&lt;&lt;ConcreteCommand&gt;&gt;</code> object, and passes it to the <code class="hljs inline no-lang" v-pre>&lt;&lt;Invoker&gt;&gt;</code>. The <code class="hljs inline no-lang" v-pre>&lt;&lt;Invoker&gt;&gt;</code> object treats all commands as a general <code class="hljs inline no-lang" v-pre>&lt;&lt;Command&gt;&gt;</code> type.  <code class="hljs inline no-lang" v-pre>&lt;&lt;Invoker&gt;&gt;</code> issues a request by calling <code class="hljs inline no-lang" v-pre>execute()</code> on the command. If a command is undoable, <code class="hljs inline no-lang" v-pre>&lt;&lt;ConcreteCommand&gt;&gt;</code> will store the state for undoing the command prior to invoking <code class="hljs inline no-lang" v-pre>execute()</code>.  In addition, the <code class="hljs inline no-lang" v-pre>&lt;&lt;ConcreteCommand&gt;&gt;</code> object may have to be linked to any <code class="hljs inline no-lang" v-pre>&lt;&lt;Receiver&gt;&gt;</code> of the command (<span data-mb-component-type="tooltip" v-b-tooltip.hover.top.html="tooltipInnerContentGetter" class="trigger"><span data-mb-slot-name="_content">the object the command will operate on, in case different commands operate on different objects</span>?</span>) before it is passed to the <code class="hljs inline no-lang" v-pre>&lt;&lt;Invoker&gt;&gt;</code>. Note that an application of the command pattern does not have to follow the structure given above.</p></div></div></div></div>
<p><div><h2 id="model-view-controller-mvc-pattern"><span id="model-view-controller-mvc-pattern" class="anchor"></span><span>Model view controller (MVC) pattern</span><a class="fa fa-anchor" href="#model-view-controller-mvc-pattern" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what-5"><span id="what-5" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DarkOrange"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what-5" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Context</strong></p>
<p>Most applications support storage/retrieval of information, displaying of information to the user (often via multiple UIs having different formats), and changing stored information based on external inputs.</p>
<p><strong>Problem</strong></p>
<p>The high coupling that can result from the interlinked nature of the features described above.</p>
<p><strong>Solution</strong></p>
<p>Decouple data, presentation, and control logic of an application by separating them into three different components: <em>Model</em>, <em>View</em> and <em>Controller</em>.</p>
<ul>
<li><em>View</em>: Displays data, interacts with the user, and pulls data from the model if necessary.</li>
<li><em>Controller</em>: Detects UI events such as mouse clicks and button pushes, and takes follow up action. Updates/changes the model/view when necessary.</li>
<li><em>Model</em>: Stores and maintains data. Updates the view if necessary.</li></ul>
<p>The relationship between the components can be observed in the diagram below. Typically, the UI is the combination of <em>View</em> and <em>Controller</em>.</p>
<img src="/website/book/designPatterns/modelViewController/what/images/classDiagram.png" width="400">
<p></p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> Given below is a concrete example of MVC applied to a student management system. In this scenario, the user is retrieving the data of a student.</p>
<img src="/website/book/designPatterns/modelViewController/what/images/sequenceDiagram.png" width="500">
<p></p>
<p>In the diagram above, when the user clicks on a button using the UI, the ‘click’ event is caught and handled by the <code class="hljs inline no-lang" v-pre>UiController</code>. The <code class="hljs inline no-lang" v-pre>ref</code> frame indicates that the interactions within that frame have been extracted out to another separate sequence diagram.</p></box>
<p>Note that in a simple UI where there’s only one view, <em>Controller</em> and <em>View</em> can be combined as one class.</p>
<p>There are many variations of the MVC model used in different domains. For example, the one used in a desktop GUI could be different from the one used in a web application.</p></div></div></div></div>
<p><div><h2 id="observer-pattern"><span id="observer-pattern" class="anchor"></span><span>Observer pattern</span><a class="fa fa-anchor" href="#observer-pattern" onclick="event.stopPropagation()"></a></h2></div></p>
<div class="indented-less">
<div class="indented-less">
<h4 id="what-6"><span id="what-6" class="anchor"></span>What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span><span aria-hidden="true" class="glyphicon glyphicon-star"></span></font><span aria-hidden="true" class="glyphicon glyphicon-star-empty"></span></small></small></span><a class="fa fa-anchor" href="#what-6" onclick="event.stopPropagation()"></a></h4>
<div class="indented-less">
<div>
<p><strong>Context</strong></p>
<p>An object (possibly more than one) is interested in being notified when a change happens to another object. That is, some objects want to ‘observe’ another object.</p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> Consider this scenario from a student management system where the user is adding a new student to the system.</p>
<img src="/website/book/designPatterns/observer/what/images/sequenceDiagram.png" height="330">
<p></p>
<p>Now, assume the system has two additional views used in parallel by different users:</p>
<ul>
<li><code class="hljs inline no-lang" v-pre>StudentListUi</code>: that accesses a list of students and</li>
<li><code class="hljs inline no-lang" v-pre>StudentStatsUi</code>: that generates statistics of current students.</li></ul>
<p>When a student is added to the database using <code class="hljs inline no-lang" v-pre>NewStudentUi</code> shown above, both <code class="hljs inline no-lang" v-pre>StudentListUi</code> and <code class="hljs inline no-lang" v-pre>StudentStatsUi</code> should get updated automatically, as shown below.</p>
<img src="/website/book/designPatterns/observer/what/images/studentListUI.png" height="180">
<p></p>
<p>However, the <code class="hljs inline no-lang" v-pre>StudentList</code> object has no knowledge about <code class="hljs inline no-lang" v-pre>StudentListUi</code> and <code class="hljs inline no-lang" v-pre>StudentStatsUi</code> (note the direction of the navigability) and has no way to inform those objects. This is an example of the type of problem addressed by the Observer pattern.</p></box>
<p><strong>Problem</strong></p>
<p>The ‘observed’ object does not want to be coupled to objects that are ‘observing’ it.</p>
<p><strong>Solution</strong></p>
<p>Force the communication through an interface known to both parties.</p>
<img src="/website/book/designPatterns/observer/what/images/studentListObserver.png" height="160">
<p></p>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> Here is the Observer pattern applied to the student management system.</p>
<p><strong>During the initialization of the system,</strong></p>
<ol>
<li>
<p>First, create the relevant objects.</p>
<pre><code class="hljs java" v-pre><span>StudentList studentList = <span class="hljs-keyword">new</span> StudentList();
</span><span>StudentListUi listUi = <span class="hljs-keyword">new</span> StudentListUi();
</span><span>StudentStatsUi statsUi = <span class="hljs-keyword">new</span> StudentStatsUi();
</span></code></pre></li>
<li>
<p>Next, the two UIs indicate to the <code class="hljs inline no-lang" v-pre>StudentList</code> that they are interested in being updated whenever <code class="hljs inline no-lang" v-pre>StudentList</code> changes. This is also known as ‘subscribing for updates’.</p>
<pre><code class="hljs java" v-pre><span>studentList.addUi(listUi);
</span><span>studentList.addUi(statsUi);
</span></code></pre></li>
<li>
<p>Within the <code class="hljs inline no-lang" v-pre>addUi</code> operation of <code class="hljs inline no-lang" v-pre>StudentList</code>, all Observer object subscribers are added to an internal data structure called <code class="hljs inline no-lang" v-pre>observerList</code>.</p>
<pre><code class="hljs java" v-pre><span><span class="hljs-comment">// StudentList class</span>
</span><span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUi</span><span class="hljs-params">(Observer o)</span> </span>{
</span><span>    observerList.add(o);
</span><span>}
</span></code></pre></li></ol>
<p><strong>Now, whenever the data in <code class="hljs inline no-lang" v-pre>StudentList</code> changes</strong> (e.g. when a new student is added to the <code class="hljs inline no-lang" v-pre>StudentList</code>),</p>
<ol>
<li>
<p>All interested observers are updated by calling the <code class="hljs inline no-lang" v-pre>notifyUIs</code> operation.</p>
<pre><code class="hljs java" v-pre><span><span class="hljs-comment">// StudentList class</span>
</span><span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyUIs</span><span class="hljs-params">()</span> </span>{
</span><span>    <span class="hljs-comment">// for each observer in the list</span>
</span><span>    <span class="hljs-keyword">for</span> (Observer o: observerList) {
</span><span>        o.update();
</span><span>    }
</span><span>}
</span></code></pre></li>
<li>
<p>UIs can then pull data from the <code class="hljs inline no-lang" v-pre>StudentList</code> whenever the <code class="hljs inline no-lang" v-pre>update</code> operation is called.</p>
<pre><code class="hljs java" v-pre><span><span class="hljs-comment">// StudentListUI class</span>
</span><span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
</span><span>    <span class="hljs-comment">// refresh UI by pulling data from StudentList</span>
</span><span>}
</span></code></pre><p>Note that <code class="hljs inline no-lang" v-pre>StudentList</code> is unaware of the exact nature of the two UIs but still manages to communicate with them via an intermediary.</p></li></ol></box>
<p>Here is the generic description of the observer pattern:</p>
<img src="/website/book/designPatterns/observer/what/images/observableInterfaceDiagram.png" height="100">
<p></p>
<ul>
<li><code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code> is an interface: any class that implements it can observe an <code class="hljs inline no-lang" v-pre>&lt;&lt;Observable&gt;&gt;</code>. Any number of <code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code> objects can observe (i.e. listen to changes of) the <code class="hljs inline no-lang" v-pre>&lt;&lt;Observable&gt;&gt;</code> object.</li>
<li>The <code class="hljs inline no-lang" v-pre>&lt;&lt;Observable&gt;&gt;</code> maintains a list of <code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code> objects. <code class="hljs inline no-lang" v-pre>addObserver(Observer)</code> operation adds a new <code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code> to the list of <code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code>s.</li>
<li>Whenever there is a change in the <code class="hljs inline no-lang" v-pre>&lt;&lt;Observable&gt;&gt;</code>, the <code class="hljs inline no-lang" v-pre>notifyObservers()</code> operation is called that will call the <code class="hljs inline no-lang" v-pre>update()</code> operation of all <code class="hljs inline no-lang" v-pre>&lt;&lt;Observer&gt;&gt;</code>s in the list.</li></ul>
<box>
<p><span><span aria-hidden="true" class="fas fa-cube"></span></span> In a GUI application, how is the Controller notified when the “save” button is clicked? UI frameworks such as JavaFX have inbuilt support for the Observer pattern.</p></box></div></div></div></div></div>
<p><i class="fa fa-arrow-circle-up fa-lg" id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true"></i></p></div>
        </div>
    <footer>
  
  <div class="text-center">
    <small>[<span><strong>Powered by</strong></span> <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 2.17.0</a>, generated on Fri, 11 Dec 2020, 23:19:56 GMT+8]</small></div></footer></div>
</body>
<script src="../../markbind/js/bootstrap-utility.min.js"></script>
<script>
  const baseUrl = '/website'
  MarkBind.setupWithSearch()
</script>
    <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script>
    function initAlgolia() {
      docsearch({
        apiKey: "0b1e4ae12d54a6114a4c5d131a850c2b",
        indexName: "nus-cs2103-ay1920s1",
        inputSelector: "#algolia-search-input",
        algoliaOptions: {"hitsPerPage":10},
        debug: false,
      });
    }
    MarkBind.afterSetup(initAlgolia);
  </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122519234-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-122519234-1');
    </script>
<script src="../../markbind/layouts/default/scripts.js"></script><script>if (MarkBind.AfterSetup) MarkBind.AfterSetup()</script>
</html>
